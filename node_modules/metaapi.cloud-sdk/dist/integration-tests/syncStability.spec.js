'use strict';

var _keys = require('babel-runtime/core-js/object/keys');

var _keys2 = _interopRequireDefault(_keys);

var _values = require('babel-runtime/core-js/object/values');

var _values2 = _interopRequireDefault(_values);

var _create = require('babel-runtime/core-js/object/create');

var _create2 = _interopRequireDefault(_create);

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

var _should = require('should');

var _should2 = _interopRequireDefault(_should);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _socket = require('socket.io');

var _socket2 = _interopRequireDefault(_socket);

var _metaApi = require('../metaApi/metaApi');

var _metaApi2 = _interopRequireDefault(_metaApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const accountInformation = {
  broker: 'True ECN Trading Ltd',
  currency: 'USD',
  server: 'ICMarketsSC-Demo',
  balance: 7319.9,
  equity: 7306.649913200001,
  margin: 184.1,
  freeMargin: 7120.22,
  leverage: 100,
  marginLevel: 3967.58283542
};
const errors = [{
  'id': 1,
  'error': 'TooManyRequestsError',
  'message': 'One user can connect to one server no more than 300 accounts. Current number of connected ' + 'accounts 300. For more information see https://metaapi.cloud/docs/client/rateLimiting/',
  'metadata': {
    'maxAccountsPerUserPerServer': 300,
    'accountsCount': 300,
    'recommendedRetryTime': new Date(Date.now() + 20000),
    'type': 'LIMIT_ACCOUNT_SUBSCRIPTIONS_PER_USER_PER_SERVER'
  }
}, {
  'id': 1,
  'error': 'TooManyRequestsError',
  'message': 'You have used all your account subscriptions quota. You have 50 account subscriptions available ' + 'and have used 50 subscriptions. Please deploy more accounts to get more subscriptions. For more ' + 'information see https://metaapi.cloud/docs/client/rateLimiting/',
  'metadata': {
    'maxAccountsPerUser': 50,
    'accountsCount': 50,
    'recommendedRetryTime': new Date(Date.now() + 20000),
    'type': 'LIMIT_ACCOUNT_SUBSCRIPTIONS_PER_USER'
  }
}, {
  'id': 1,
  'error': 'TooManyRequestsError',
  'message': 'You can not subscribe to more accounts on this connection because server is out of capacity. ' + 'Please establish a new connection with a different client-id header value to switch to a ' + 'different server. For more information see https://metaapi.cloud/docs/client/rateLimiting/',
  'metadata': {
    'changeClientIdHeader': true,
    'recommendedRetryTime': new Date(Date.now() + 20000),
    'type': 'LIMIT_ACCOUNT_SUBSCRIPTIONS_PER_SERVER'
  }
}];

let server;

class FakeServer {
  constructor() {
    this.io;
    this.socket;
    this.statusTasks = {};
  }

  async authenticate(socket, data, host = 'ps-mpa-0') {
    socket.emit('synchronization', { type: 'authenticated', accountId: data.accountId,
      instanceIndex: 0, replicas: 1, host });
  }

  deleteStatusTask(accountId) {
    if (this.statusTasks[accountId]) {
      clearInterval(this.statusTasks[accountId]);
      delete this.statusTasks[accountId];
    }
  }

  async emitStatus(socket, accountId, host = 'ps-mpa-0') {
    const packet = { connected: true, authenticated: true, instanceIndex: 0, type: 'status',
      healthStatus: { rpcApiHealthy: true }, replicas: 1, host,
      connectionId: accountId, accountId: accountId };
    socket.emit('synchronization', packet);
  }

  async respondAccountInformation(socket, data) {
    await socket.emit('response', { type: 'response', accountId: data.accountId, requestId: data.requestId,
      accountInformation });
  }

  async syncAccount(socket, data, host = 'ps-mpa-0') {
    socket.emit('synchronization', { type: 'synchronizationStarted', accountId: data.accountId, instanceIndex: 0,
      synchronizationId: data.requestId, host });
    await new _promise2.default(res => setTimeout(res, 50));
    socket.emit('synchronization', { type: 'accountInformation', accountId: data.accountId, accountInformation,
      instanceIndex: 0, host });
    await new _promise2.default(res => setTimeout(res, 50));
    socket.emit('synchronization', { type: 'specifications', accountId: data.accountId, specifications: [], instanceIndex: 0, host });
    await new _promise2.default(res => setTimeout(res, 50));
    socket.emit('synchronization', { type: 'orderSynchronizationFinished', accountId: data.accountId,
      synchronizationId: data.requestId, instanceIndex: 0, host });
    await new _promise2.default(res => setTimeout(res, 50));
    socket.emit('synchronization', { type: 'dealSynchronizationFinished', accountId: data.accountId,
      synchronizationId: data.requestId, instanceIndex: 0, host });
  }

  async respond(socket, data) {
    await socket.emit('response', { type: 'response', accountId: data.accountId, requestId: data.requestId });
  }

  async emitError(socket, data, errorIndex, retryAfterSeconds) {
    const error = errors[errorIndex];
    error.metadata.recommendedRetryTime = new Date(Date.now() + retryAfterSeconds * 1000);
    error.requestId = data.requestId;
    await socket.emit('processingError', error);
  }

  enableSync(socket) {
    socket.removeAllListeners('request');
    socket.on('request', async data => {
      if (data.type === 'subscribe') {
        await new _promise2.default(res => setTimeout(res, 200));
        await this.respond(socket, data);
        this.statusTasks[data.accountId] = setInterval(() => this.emitStatus(socket, data.accountId), 100);
        await new _promise2.default(res => setTimeout(res, 50));
        await this.authenticate(socket, data);
      } else if (data.type === 'synchronize') {
        await this.respond(socket, data);
        await new _promise2.default(res => setTimeout(res, 50));
        await this.syncAccount(socket, data);
      } else if (data.type === 'waitSynchronized') {
        await this.respond(socket, data);
      } else if (data.type === 'getAccountInformation') {
        await this.respondAccountInformation(socket, data);
      } else if (data.type === 'unsubscribe') {
        this.deleteStatusTask(data.accountId);
        await this.respond(socket, data);
      }
    });
  }

  disableSync() {
    server.removeAllListeners('request');
    server.on('request', async data => {
      await this.respond(server, data);
    });
  }

  async start(port = 6785) {
    this.io = new _socket2.default(port, { path: '/ws', pingTimeout: 1000000 });
    this.io.on('connect', socket => {
      server = socket;
      socket.emit('response', { type: 'response' });
      this.enableSync(socket);
    });
  }

}

const sequentialProcessing = [true, false];
sequentialProcessing.forEach(param => {
  describe('Synchronization stability test', () => {

    let fakeServer;
    let connection;
    let clock;
    let sandbox;
    let api;

    before(() => {
      sandbox = _sinon2.default.createSandbox();
      const mockMath = (0, _create2.default)(global.Math);
      mockMath.random = () => 0.2;
      global.Math = mockMath;
    });

    beforeEach(async () => {
      clock = _sinon2.default.useFakeTimers({ shouldAdvanceTime: true });
      api = new _metaApi2.default('token', { application: 'application', domain: 'project-stock.agiliumlabs.cloud',
        useSharedClientApi: true, requestTimeout: 3, retryOpts: {
          retries: 3, minDelayInSeconds: 0.1, maxDelayInSeconds: 0.5, subscribeCooldownInSeconds: 6 },
        eventProcessing: { sequentialProcessing: param } });
      api.metatraderAccountApi._metatraderAccountClient.getAccount = accountId => ({
        _id: accountId,
        login: '50194988',
        name: 'mt5a',
        server: 'ICMarketsSC-Demo',
        provisioningProfileId: 'f9ce1f12-e720-4b9a-9477-c2d4cb25f076',
        magic: 123456,
        application: 'MetaApi',
        connectionStatus: 'DISCONNECTED',
        state: 'DEPLOYED',
        type: 'cloud',
        accessToken: '2RUnoH1ldGbnEneCoqRTgI4QO1XOmVzbH5EVoQsA'
      });
      api._metaApiWebsocketClient.url = 'http://localhost:6785';
      fakeServer = new FakeServer();
      await fakeServer.start();
    });

    afterEach(async () => {
      (0, _values2.default)(fakeServer.statusTasks).forEach(task => clearInterval(task));
      connection._websocketClient._subscriptionManager.cancelAccount('accountId');
      connection._websocketClient.close();
      let resolve;
      let promise = new _promise2.default(res => resolve = res);
      fakeServer.io.close(() => {
        resolve();
      });
      await promise;
      sandbox.restore();
      clock.restore();
      await new _promise2.default(res => setTimeout(res, 50));
    });

    it('should synchronize account', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const response = await connection.getAccountInformation();
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should reconnect on server socket crash', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      server.disconnect();
      await new _promise2.default(res => setTimeout(res, 200));
      const response = await connection.getAccountInformation();
      _sinon2.default.assert.match(response, accountInformation);
    }).timeout(10000);

    it('should set state to disconnected on timeout', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      fakeServer.io.on('connect', socket => {
        socket.disconnect();
      });
      server.disconnect();
      await clock.tickAsync(61000);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
    }).timeout(10000);

    it('should resubscribe on timeout', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      await clock.tickAsync(61000);
      await new _promise2.default(res => setTimeout(res, 50));
      const response = await connection.getAccountInformation();
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should synchronize if subscribe response arrives after synchronization', async () => {
      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        socket.on('request', async data => {
          if (data.type === 'subscribe') {
            await new _promise2.default(res => setTimeout(res, 200));
            fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
            await fakeServer.authenticate(socket, data);
            await new _promise2.default(res => setTimeout(res, 400));
            await fakeServer.respond(socket, data);
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const response = await connection.getAccountInformation();
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should wait until account is redeployed after disconnect', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      fakeServer.disableSync();
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await clock.tickAsync(20000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(200000);
      fakeServer.enableSync(server);
      await clock.tickAsync(20000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(200000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should resubscribe immediately after disconnect on status packet', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      fakeServer.disableSync();
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await clock.tickAsync(20000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(200000);
      fakeServer.enableSync(server);
      await fakeServer.emitStatus(server, 'accountId');
      await clock.tickAsync(20000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should reconnect after server restarts', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      for (let i = 0; i < 5; i++) {
        fakeServer.deleteStatusTask('accountId');
        fakeServer.io.close();
        await clock.tickAsync(200000);
        await new _promise2.default(res => setTimeout(res, 50));
        await fakeServer.start();
        await new _promise2.default(res => setTimeout(res, 200));
      }
      const response = await connection.getAccountInformation();
      _sinon2.default.assert.match(response, accountInformation);
    }).timeout(10000);

    it('should synchronize if connecting while server is rebooting', async () => {
      fakeServer.io.close();
      await fakeServer.start(9000);
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      setTimeout(() => {
        fakeServer.io.close();
        fakeServer.start();
      }, 3000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const response = await connection.getAccountInformation();
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should resubscribe other accounts after one of connections is closed', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      connection.waitSynchronized({ timeoutInSeconds: 3 });
      await clock.tickAsync(1000);
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = await account2.connect();
      connection2.waitSynchronized({ timeoutInSeconds: 3 });
      await clock.tickAsync(1000);
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = await account3.connect();
      connection3.waitSynchronized({ timeoutInSeconds: 3 });
      await clock.tickAsync(1000);
      await connection.close();
      fakeServer.deleteStatusTask('accountId2');
      fakeServer.deleteStatusTask('accountId3');
      fakeServer.disableSync();
      server.disconnect();
      await clock.tickAsync(2000);
      await new _promise2.default(res => setTimeout(res, 50));
      fakeServer.enableSync(server);
      server.disconnect();
      await clock.tickAsync(8000);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection2.synchronized.should.equal(true);
      connection2.terminalState.connected.should.equal(true);
      connection2.terminalState.connectedToBroker.should.equal(true);
      connection3.synchronized.should.equal(true);
      connection3.terminalState.connected.should.equal(true);
      connection3.terminalState.connectedToBroker.should.equal(true);
    });

    it('should limit subscriptions during per user 429 error', async () => {
      const subscribedAccounts = {};
      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        socket.on('request', async data => {
          if (data.type === 'subscribe') {
            if ((0, _keys2.default)(subscribedAccounts).length < 2) {
              subscribedAccounts[data.accountId] = true;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            } else {
              await fakeServer.emitError(socket, data, 1, 2);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete subscribedAccounts[data.accountId];
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = await account2.connect();
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = await account3.connect();
      try {
        await connection3.waitSynchronized({ timeoutInSeconds: 3 });
        throw new Error('TimeoutError expected');
      } catch (err) {
        err.name.should.equal('TimeoutError');
      }
      await connection2.close();
      await clock.tickAsync(2000);
      _sinon2.default.assert.match(connection3.synchronized, true);
    }).timeout(10000);

    it('should wait for retry time after per user 429 error', async () => {
      let requestTimestamp = 0;
      const subscribedAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.type === 'subscribe') {
            if ((0, _keys2.default)(subscribedAccounts).length < 2 || requestTimestamp !== 0 && Date.now() - 2 * 1000 > requestTimestamp) {
              subscribedAccounts[data.accountId] = true;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            } else {
              requestTimestamp = Date.now();
              await fakeServer.emitError(socket, data, 1, 3);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete subscribedAccounts[data.accountId];
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = await account2.connect();
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = await account3.connect();
      try {
        await connection3.waitSynchronized({ timeoutInSeconds: 3 });
        throw new Error('TimeoutError expected');
      } catch (err) {
        err.name.should.equal('TimeoutError');
      }
      await clock.tickAsync(2000);
      _sinon2.default.assert.match(connection3.synchronized, false);
      await clock.tickAsync(2500);
      await new _promise2.default(res => setTimeout(res, 200));
      _sinon2.default.assert.match(connection3.synchronized, true);
    }).timeout(10000);

    it('should wait for retry time after per server 429 error', async () => {
      let requestTimestamp = 0;
      const sidByAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          const sid = socket.id;
          if (data.type === 'subscribe') {
            if ((0, _values2.default)(sidByAccounts).filter(accountSID => accountSID === sid).length >= 2 && (requestTimestamp === 0 || Date.now() - 5 * 1000 < requestTimestamp)) {
              requestTimestamp = Date.now();
              await fakeServer.emitError(socket, data, 2, 5);
            } else {
              sidByAccounts[data.accountId] = sid;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = await account2.connect();
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = await account3.connect();
      connection3.waitSynchronized({ timeoutInSeconds: 5 });
      await clock.tickAsync(5000);
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId2);
      sidByAccounts.accountId2.should.not.equal(sidByAccounts.accountId3);
      await clock.tickAsync(5000);
      const account4 = await api.metatraderAccountApi.getAccount('accountId4');
      const connection4 = await account4.connect();
      await connection4.waitSynchronized({ timeoutInSeconds: 3 });
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId4);
    }).timeout(10000);

    it('should reconnect after per server 429 error if connection has no subscribed accounts', async () => {
      const sids = [];

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          const sid = socket.id;
          if (data.type === 'subscribe') {
            sids.push(sid);
            if (sids.length === 1) {
              await fakeServer.emitError(socket, data, 2, 2);
            } else {
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 5 });
      sids[0].should.not.equal(sids[1]);
    }).timeout(10000);

    it('should free a subscribe slot on unsubscribe after per server 429 error', async () => {
      const sidByAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          const sid = socket.id;
          if (data.type === 'subscribe') {
            if ((0, _values2.default)(sidByAccounts).filter(accountSID => accountSID === sid).length >= 2) {
              await fakeServer.emitError(socket, data, 2, 200);
            } else {
              sidByAccounts[data.accountId] = sid;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete sidByAccounts[data.accountId];
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = await account2.connect();
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = await account3.connect();
      connection3.waitSynchronized({ timeoutInSeconds: 5 });
      await clock.tickAsync(5000);
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId2);
      sidByAccounts.accountId2.should.not.equal(sidByAccounts.accountId3);
      await connection2.close();
      const account4 = await api.metatraderAccountApi.getAccount('accountId4');
      const connection4 = await account4.connect();
      await connection4.waitSynchronized({ timeoutInSeconds: 3 });
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId4);
    }).timeout(10000);

    it('should wait for retry time after per server per user 429 error', async () => {
      let requestTimestamp = 0;
      const sidByAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          const sid = socket.id;
          if (data.type === 'subscribe') {
            if ((0, _values2.default)(sidByAccounts).filter(accountSID => accountSID === sid).length >= 2 && (requestTimestamp === 0 || Date.now() - 2 * 1000 < requestTimestamp)) {
              requestTimestamp = Date.now();
              await fakeServer.emitError(socket, data, 0, 2);
            } else {
              sidByAccounts[data.accountId] = sid;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete sidByAccounts[data.accountId];
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = await account2.connect();
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = await account3.connect();
      connection3.waitSynchronized({ timeoutInSeconds: 5 });
      await clock.tickAsync(5000);
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId2);
      sidByAccounts.accountId2.should.not.equal(sidByAccounts.accountId3);
      const account4 = await api.metatraderAccountApi.getAccount('accountId4');
      const connection4 = await account4.connect();
      await connection4.waitSynchronized({ timeoutInSeconds: 3 });
      sidByAccounts.accountId.should.not.equal(sidByAccounts.accountId4);
      await connection2.close();
      const account5 = await api.metatraderAccountApi.getAccount('accountId5');
      const connection5 = await account5.connect();
      await connection5.waitSynchronized({ timeoutInSeconds: 3 });
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId5);
    }).timeout(10000);

    it('should attempt to resubscribe on disconnected packet', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      fakeServer.deleteStatusTask('accountId');
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(200);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(5000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    });

    it('should handle multiple streams in one instance number', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      let subscribeCalled = false;

      fakeServer.enableSync = socket => {
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.type === 'subscribe') {
            subscribeCalled = true;
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data, 'ps-mpa-1');
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      };
      fakeServer.enableSync(server);
      const statusTask = setInterval(() => fakeServer.emitStatus(server, 'accountId', 'ps-mpa-1'), 100);
      await fakeServer.authenticate(server, { accountId: 'accountId' }, 'ps-mpa-1');
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(20000);
      fakeServer.deleteStatusTask('accountId');
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(10000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      subscribeCalled.should.equal(false);
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-1', instanceIndex: 0 });
      clearInterval(statusTask);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
    }).timeout(10000);

    it('should not resubscribe if multiple streams and one timed out', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      let subscribeCalled = false;

      fakeServer.enableSync = socket => {
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.type === 'subscribe') {
            subscribeCalled = true;
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data, 'ps-mpa-1');
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      };
      fakeServer.enableSync(server);
      const statusTask = setInterval(() => fakeServer.emitStatus(server, 'accountId', 'ps-mpa-1'), 120);
      await fakeServer.authenticate(server, { accountId: 'accountId' }, 'ps-mpa-1');
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(20000);
      fakeServer.deleteStatusTask('accountId');
      await clock.tickAsync(55000);
      await new _promise2.default(res => setTimeout(res, 50));
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      subscribeCalled.should.equal(false);
      clearInterval(statusTask);
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(65000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      subscribeCalled.should.equal(true);
    }).timeout(10000);

    it('should not synchronize if connection is closed', async () => {
      let synchronizeCounter = 0;
      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.type === 'subscribe') {
            await new _promise2.default(res => setTimeout(res, 200));
            await fakeServer.respond(socket, data);
            fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
            await fakeServer.authenticate(socket, data);
          } else if (data.type === 'synchronize') {
            synchronizeCounter++;
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data, 'ps-mpa-1');
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            fakeServer.deleteStatusTask(data.accountId);
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      _sinon2.default.assert.match(synchronizeCounter, 1);
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = await account2.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      await connection2.close();
      try {
        await connection2.waitSynchronized({ timeoutInSeconds: 3 });
        throw new Error('TimeoutError extected');
      } catch (err) {
        err.name.should.equal('TimeoutError');
      }
      _sinon2.default.assert.match(synchronizeCounter, 1);
    }).timeout(10000);

    it('should not resubscribe after connection is closed', async () => {
      let subscribeCounter = 0;

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.type === 'subscribe') {
            subscribeCounter++;
            await new _promise2.default(res => setTimeout(res, 100));
            await fakeServer.respond(socket, data);
            fakeServer.deleteStatusTask(data.accountId);
            fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
            await fakeServer.authenticate(socket, data);
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            fakeServer.deleteStatusTask(data.accountId);
            await fakeServer.respond(socket, data);
          }
        });
      });

      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      subscribeCounter.should.equal(1);
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await new _promise2.default(res => setTimeout(res, 300));
      await clock.tickAsync(100000);
      await new _promise2.default(res => setTimeout(res, 200));
      subscribeCounter.should.be.above(1);
      const previousSubscribeCounter = subscribeCounter;
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await connection.close();
      await new _promise2.default(res => setTimeout(res, 1000));
      await clock.tickAsync(100000);
      await new _promise2.default(res => setTimeout(res, 1000));
      _sinon2.default.assert.match(subscribeCounter, previousSubscribeCounter);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
    }).timeout(10000);

    it('should not resubscribe on timeout if connection is closed', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      connection.synchronized.should.equal(true);
      await connection.close();
      await new _promise2.default(res => setTimeout(res, 100));
      await clock.tickAsync(62000);
      connection.synchronized.should.equal(false);
    });

    it('should not send multiple subscribe requests if status arrives faster than subscribe', async () => {
      let subscribeCounter = 0;
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = await account.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.disableSync();
      fakeServer.deleteStatusTask('accountId');
      await new _promise2.default(res => setTimeout(res, 100));
      await clock.tickAsync(120000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);

      server.removeAllListeners('request');
      //eslint-disable-next-line complexity
      server.on('request', async data => {
        if (data.type === 'subscribe') {
          subscribeCounter++;
          await new _promise2.default(res => setTimeout(res, 2800));
          await fakeServer.respond(server, data);
          fakeServer.deleteStatusTask(data.accountId);
          fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(server, data.accountId), 1000);
          await fakeServer.authenticate(server, data);
        } else if (data.type === 'synchronize') {
          await fakeServer.respond(server, data);
          await fakeServer.syncAccount(server, data);
        } else if (data.type === 'waitSynchronized') {
          await fakeServer.respond(server, data);
        } else if (data.type === 'getAccountInformation') {
          await fakeServer.respondAccountInformation(server, data);
        } else if (data.type === 'unsubscribe') {
          fakeServer.deleteStatusTask(data.accountId);
          await fakeServer.respond(server, data);
        }
      });
      fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(server, 'accountId'), 1000);
      await new _promise2.default(res => setTimeout(res, 100));
      await clock.tickAsync(200000);
      await new _promise2.default(res => setTimeout(res, 100));
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      _sinon2.default.assert.match(subscribeCounter, 1);
    }).timeout(10000);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9pbnRlZ3JhdGlvbi10ZXN0cy9zeW5jU3RhYmlsaXR5LnNwZWMuZXM2Il0sIm5hbWVzIjpbImFjY291bnRJbmZvcm1hdGlvbiIsImJyb2tlciIsImN1cnJlbmN5Iiwic2VydmVyIiwiYmFsYW5jZSIsImVxdWl0eSIsIm1hcmdpbiIsImZyZWVNYXJnaW4iLCJsZXZlcmFnZSIsIm1hcmdpbkxldmVsIiwiZXJyb3JzIiwiRGF0ZSIsIm5vdyIsIkZha2VTZXJ2ZXIiLCJjb25zdHJ1Y3RvciIsImlvIiwic29ja2V0Iiwic3RhdHVzVGFza3MiLCJhdXRoZW50aWNhdGUiLCJkYXRhIiwiaG9zdCIsImVtaXQiLCJ0eXBlIiwiYWNjb3VudElkIiwiaW5zdGFuY2VJbmRleCIsInJlcGxpY2FzIiwiZGVsZXRlU3RhdHVzVGFzayIsImNsZWFySW50ZXJ2YWwiLCJlbWl0U3RhdHVzIiwicGFja2V0IiwiY29ubmVjdGVkIiwiYXV0aGVudGljYXRlZCIsImhlYWx0aFN0YXR1cyIsInJwY0FwaUhlYWx0aHkiLCJjb25uZWN0aW9uSWQiLCJyZXNwb25kQWNjb3VudEluZm9ybWF0aW9uIiwicmVxdWVzdElkIiwic3luY0FjY291bnQiLCJzeW5jaHJvbml6YXRpb25JZCIsInJlcyIsInNldFRpbWVvdXQiLCJzcGVjaWZpY2F0aW9ucyIsInJlc3BvbmQiLCJlbWl0RXJyb3IiLCJlcnJvckluZGV4IiwicmV0cnlBZnRlclNlY29uZHMiLCJlcnJvciIsIm1ldGFkYXRhIiwicmVjb21tZW5kZWRSZXRyeVRpbWUiLCJlbmFibGVTeW5jIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib24iLCJzZXRJbnRlcnZhbCIsImRpc2FibGVTeW5jIiwic3RhcnQiLCJwb3J0IiwiU2VydmVyIiwicGF0aCIsInBpbmdUaW1lb3V0Iiwic2VxdWVudGlhbFByb2Nlc3NpbmciLCJmb3JFYWNoIiwicGFyYW0iLCJkZXNjcmliZSIsImZha2VTZXJ2ZXIiLCJjb25uZWN0aW9uIiwiY2xvY2siLCJzYW5kYm94IiwiYXBpIiwiYmVmb3JlIiwic2lub24iLCJjcmVhdGVTYW5kYm94IiwibW9ja01hdGgiLCJnbG9iYWwiLCJNYXRoIiwicmFuZG9tIiwiYmVmb3JlRWFjaCIsInVzZUZha2VUaW1lcnMiLCJzaG91bGRBZHZhbmNlVGltZSIsIk1ldGFBcGkiLCJhcHBsaWNhdGlvbiIsImRvbWFpbiIsInVzZVNoYXJlZENsaWVudEFwaSIsInJlcXVlc3RUaW1lb3V0IiwicmV0cnlPcHRzIiwicmV0cmllcyIsIm1pbkRlbGF5SW5TZWNvbmRzIiwibWF4RGVsYXlJblNlY29uZHMiLCJzdWJzY3JpYmVDb29sZG93bkluU2Vjb25kcyIsImV2ZW50UHJvY2Vzc2luZyIsIm1ldGF0cmFkZXJBY2NvdW50QXBpIiwiX21ldGF0cmFkZXJBY2NvdW50Q2xpZW50IiwiZ2V0QWNjb3VudCIsIl9pZCIsImxvZ2luIiwibmFtZSIsInByb3Zpc2lvbmluZ1Byb2ZpbGVJZCIsIm1hZ2ljIiwiY29ubmVjdGlvblN0YXR1cyIsInN0YXRlIiwiYWNjZXNzVG9rZW4iLCJfbWV0YUFwaVdlYnNvY2tldENsaWVudCIsInVybCIsImFmdGVyRWFjaCIsInRhc2siLCJfd2Vic29ja2V0Q2xpZW50IiwiX3N1YnNjcmlwdGlvbk1hbmFnZXIiLCJjYW5jZWxBY2NvdW50IiwiY2xvc2UiLCJyZXNvbHZlIiwicHJvbWlzZSIsInJlc3RvcmUiLCJpdCIsImFjY291bnQiLCJjb25uZWN0Iiwid2FpdFN5bmNocm9uaXplZCIsInRpbWVvdXRJblNlY29uZHMiLCJyZXNwb25zZSIsImdldEFjY291bnRJbmZvcm1hdGlvbiIsImFzc2VydCIsIm1hdGNoIiwic3luY2hyb25pemVkIiwidGVybWluYWxTdGF0ZSIsImNvbm5lY3RlZFRvQnJva2VyIiwic2hvdWxkIiwiZXF1YWwiLCJ0aW1lb3V0IiwiZGlzY29ubmVjdCIsInRpY2tBc3luYyIsImkiLCJhY2NvdW50MiIsImNvbm5lY3Rpb24yIiwiYWNjb3VudDMiLCJjb25uZWN0aW9uMyIsInN1YnNjcmliZWRBY2NvdW50cyIsImxlbmd0aCIsIkVycm9yIiwiZXJyIiwicmVxdWVzdFRpbWVzdGFtcCIsInNpZEJ5QWNjb3VudHMiLCJzaWQiLCJpZCIsImZpbHRlciIsImFjY291bnRTSUQiLCJhY2NvdW50SWQyIiwibm90IiwiYWNjb3VudElkMyIsImFjY291bnQ0IiwiY29ubmVjdGlvbjQiLCJhY2NvdW50SWQ0Iiwic2lkcyIsInB1c2giLCJhY2NvdW50NSIsImNvbm5lY3Rpb241IiwiYWNjb3VudElkNSIsInN1YnNjcmliZUNhbGxlZCIsInN0YXR1c1Rhc2siLCJzeW5jaHJvbml6ZUNvdW50ZXIiLCJzdWJzY3JpYmVDb3VudGVyIiwiYmUiLCJhYm92ZSIsInByZXZpb3VzU3Vic2NyaWJlQ291bnRlciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxxQkFBcUI7QUFDekJDLFVBQVEsc0JBRGlCO0FBRXpCQyxZQUFVLEtBRmU7QUFHekJDLFVBQVEsa0JBSGlCO0FBSXpCQyxXQUFTLE1BSmdCO0FBS3pCQyxVQUFRLGlCQUxpQjtBQU16QkMsVUFBUSxLQU5pQjtBQU96QkMsY0FBWSxPQVBhO0FBUXpCQyxZQUFVLEdBUmU7QUFTekJDLGVBQWE7QUFUWSxDQUEzQjtBQVdBLE1BQU1DLFNBQVMsQ0FDYjtBQUNFLFFBQU0sQ0FEUjtBQUVFLFdBQVMsc0JBRlg7QUFHRSxhQUFXLCtGQUNBLHdGQUpiO0FBS0UsY0FBWTtBQUNWLG1DQUErQixHQURyQjtBQUVWLHFCQUFrQixHQUZSO0FBR1YsNEJBQXdCLElBQUlDLElBQUosQ0FBU0EsS0FBS0MsR0FBTCxLQUFhLEtBQXRCLENBSGQ7QUFJVixZQUFRO0FBSkU7QUFMZCxDQURhLEVBYWI7QUFDRSxRQUFNLENBRFI7QUFFRSxXQUFTLHNCQUZYO0FBR0UsYUFBVyxxR0FDQSxrR0FEQSxHQUVBLGlFQUxiO0FBTUUsY0FBWTtBQUNWLDBCQUF1QixFQURiO0FBRVYscUJBQWlCLEVBRlA7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WCxJQUEyQnhELFdBQVd5RCxhQUFYLENBQXlCM0YsU0FBcEQsSUFDRWtDLFdBQVd5RCxhQUFYLENBQXlCQyxpQkFENUIsRUFDK0NDLE1BRC9DLENBQ3NEQyxLQUR0RCxDQUM0RCxJQUQ1RDtBQUVBdkQsc0JBQU1pRCxNQUFOLENBQWFDLEtBQWIsQ0FBbUJzQyxnQkFBbkIsRUFBcUMsQ0FBckM7QUFDRCxLQTFDRCxFQTBDR2hDLE9BMUNILENBMENXLEtBMUNYO0FBMkNELEdBdnpCRDtBQXd6QkQsQ0F6ekJEIiwiZmlsZSI6InN5bmNTdGFiaWxpdHkuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHNob3VsZCBmcm9tICdzaG91bGQnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCBTZXJ2ZXIgZnJvbSAnc29ja2V0LmlvJztcbmltcG9ydCBNZXRhQXBpIGZyb20gJy4uL21ldGFBcGkvbWV0YUFwaSc7XG5cbmNvbnN0IGFjY291bnRJbmZvcm1hdGlvbiA9IHtcbiAgYnJva2VyOiAnVHJ1ZSBFQ04gVHJhZGluZyBMdGQnLFxuICBjdXJyZW5jeTogJ1VTRCcsXG4gIHNlcnZlcjogJ0lDTWFya2V0c1NDLURlbW8nLFxuICBiYWxhbmNlOiA3MzE5LjksXG4gIGVxdWl0eTogNzMwNi42NDk5MTMyMDAwMDEsXG4gIG1hcmdpbjogMTg0LjEsXG4gIGZyZWVNYXJnaW46IDcxMjAuMjIsXG4gIGxldmVyYWdlOiAxMDAsXG4gIG1hcmdpbkxldmVsOiAzOTY3LjU4MjgzNTQyXG59O1xuY29uc3QgZXJyb3JzID0gW1xuICB7XG4gICAgJ2lkJzogMSxcbiAgICAnZXJyb3InOiAnVG9vTWFueVJlcXVlc3RzRXJyb3InLFxuICAgICdtZXNzYWdlJzogJ09uZSB1c2VyIGNhbiBjb25uZWN0IHRvIG9uZSBzZXJ2ZXIgbm8gbW9yZSB0aGFuIDMwMCBhY2NvdW50cy4gQ3VycmVudCBudW1iZXIgb2YgY29ubmVjdGVkICcgK1xuICAgICAgICAgICAgICAgJ2FjY291bnRzIDMwMC4gRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL2NsaWVudC9yYXRlTGltaXRpbmcvJyxcbiAgICAnbWV0YWRhdGEnOiB7XG4gICAgICAnbWF4QWNjb3VudHNQZXJVc2VyUGVyU2VydmVyJzogMzAwLFxuICAgICAgJ2FjY291bnRzQ291bnQnOiAgMzAwLFxuICAgICAgJ3JlY29tbWVuZGVkUmV0cnlUaW1lJzogbmV3IERhdGUoRGF0ZS5ub3coKSArIDIwMDAwKSxcbiAgICAgICd0eXBlJzogJ0xJTUlUX0FDQ09VTlRfU1VCU0NSSVBUSU9OU19QRVJfVVNFUl9QRVJfU0VSVkVSJ1xuICAgIH1cbiAgfSxcbiAge1xuICAgICdpZCc6IDEsXG4gICAgJ2Vycm9yJzogJ1Rvb01hbnlSZXF1ZXN0c0Vycm9yJyxcbiAgICAnbWVzc2FnZSc6ICdZb3UgaGF2ZSB1c2VkIGFsbCB5b3VyIGFjY291bnQgc3Vic2NyaXB0aW9ucyBxdW90YS4gWW91IGhhdmUgNTAgYWNjb3VudCBzdWJzY3JpcHRpb25zIGF2YWlsYWJsZSAnICtcbiAgICAgICAgICAgICAgICdhbmQgaGF2ZSB1c2VkIDUwIHN1YnNjcmlwdGlvbnMuIFBsZWFzZSBkZXBsb3kgbW9yZSBhY2NvdW50cyB0byBnZXQgbW9yZSBzdWJzY3JpcHRpb25zLiBGb3IgbW9yZSAnICtcbiAgICAgICAgICAgICAgICdpbmZvcm1hdGlvbiBzZWUgaHR0cHM6Ly9tZXRhYXBpLmNsb3VkL2RvY3MvY2xpZW50L3JhdGVMaW1pdGluZy8nLFxuICAgICdtZXRhZGF0YSc6IHtcbiAgICAgICdtYXhBY2NvdW50c1BlclVzZXInOiAgNTAsXG4gICAgICAnYWNjb3VudHNDb3VudCc6IDUwLFxuICAgICAgJ3JlY29tbWVuZGVkUmV0cnlUaW1lJzogbmV3IERhdGUoRGF0ZS5ub3coKSArIDIwMDAwKSxcbiAgICAgICd0eXBlJzogJ0xJTUlUX0FDQ09VTlRfU1VCU0NSSVBUSU9OU19QRVJfVVNFUidcbiAgICB9XG4gIH0sXG4gIHtcbiAgICAnaWQnOiAxLFxuICAgICdlcnJvcic6ICdUb29NYW55UmVxdWVzdHNFcnJvcicsXG4gICAgJ21lc3NhZ2UnOiAnWW91IGNhbiBub3Qgc3Vic2NyaWJlIHRvIG1vcmUgYWNjb3VudHMgb24gdGhpcyBjb25uZWN0aW9uIGJlY2F1c2Ugc2VydmVyIGlzIG91dCBvZiBjYXBhY2l0eS4gJyArXG4gICAgICAgICAgICAgICAnUGxlYXNlIGVzdGFibGlzaCBhIG5ldyBjb25uZWN0aW9uIHdpdGggYSBkaWZmZXJlbnQgY2xpZW50LWlkIGhlYWRlciB2YWx1ZSB0byBzd2l0Y2ggdG8gYSAnICtcbiAgICAgICAgICAgICAgICdkaWZmZXJlbnQgc2VydmVyLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUgaHR0cHM6Ly9tZXRhYXBpLmNsb3VkL2RvY3MvY2xpZW50L3JhdGVMaW1pdGluZy8nLFxuICAgICdtZXRhZGF0YSc6IHtcbiAgICAgICdjaGFuZ2VDbGllbnRJZEhlYWRlcic6IHRydWUsXG4gICAgICAncmVjb21tZW5kZWRSZXRyeVRpbWUnOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMjAwMDApLFxuICAgICAgJ3R5cGUnOiAnTElNSVRfQUNDT1VOVF9TVUJTQ1JJUFRJT05TX1BFUl9TRVJWRVInXG4gICAgfVxuICB9XG5dO1xuXG5sZXQgc2VydmVyO1xuXG5jbGFzcyBGYWtlU2VydmVyIHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLmlvO1xuICAgIHRoaXMuc29ja2V0O1xuICAgIHRoaXMuc3RhdHVzVGFza3MgPSB7fTtcbiAgfVxuXG4gIGFzeW5jIGF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEsIGhvc3Q9J3BzLW1wYS0wJyl7XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHt0eXBlOiAnYXV0aGVudGljYXRlZCcsIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXG4gICAgICBpbnN0YW5jZUluZGV4OiAwLCByZXBsaWNhczogMSwgaG9zdH0pO1xuICB9XG5cbiAgZGVsZXRlU3RhdHVzVGFzayhhY2NvdW50SWQpIHtcbiAgICBpZih0aGlzLnN0YXR1c1Rhc2tzW2FjY291bnRJZF0pIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdGF0dXNUYXNrc1thY2NvdW50SWRdKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnN0YXR1c1Rhc2tzW2FjY291bnRJZF07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZW1pdFN0YXR1cyhzb2NrZXQsIGFjY291bnRJZCwgaG9zdD0ncHMtbXBhLTAnKXtcbiAgICBjb25zdCBwYWNrZXQgPSB7Y29ubmVjdGVkOiB0cnVlLCBhdXRoZW50aWNhdGVkOiB0cnVlLCBpbnN0YW5jZUluZGV4OiAwLCB0eXBlOiAnc3RhdHVzJyxcbiAgICAgIGhlYWx0aFN0YXR1czoge3JwY0FwaUhlYWx0aHk6IHRydWV9LCByZXBsaWNhczogMSwgaG9zdCxcbiAgICAgIGNvbm5lY3Rpb25JZDogYWNjb3VudElkLCBhY2NvdW50SWQ6IGFjY291bnRJZH07XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHBhY2tldCk7XG4gIH1cblxuICBhc3luYyByZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSl7XG4gICAgYXdhaXQgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywge3R5cGU6ICdyZXNwb25zZScsIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIHJlcXVlc3RJZDogZGF0YS5yZXF1ZXN0SWQsIFxuICAgICAgYWNjb3VudEluZm9ybWF0aW9ufSk7XG4gIH1cblxuICBhc3luYyBzeW5jQWNjb3VudChzb2NrZXQsIGRhdGEsIGhvc3Q9J3BzLW1wYS0wJyl7XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHt0eXBlOiAnc3luY2hyb25pemF0aW9uU3RhcnRlZCcsIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGluc3RhbmNlSW5kZXg6IDAsIFxuICAgICAgc3luY2hyb25pemF0aW9uSWQ6IGRhdGEucmVxdWVzdElkLCBob3N0fSk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgIHNvY2tldC5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ2FjY291bnRJbmZvcm1hdGlvbicsIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGFjY291bnRJbmZvcm1hdGlvbixcbiAgICAgIGluc3RhbmNlSW5kZXg6IDAsIGhvc3R9KTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsXG4gICAgICB7dHlwZTogJ3NwZWNpZmljYXRpb25zJywgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgc3BlY2lmaWNhdGlvbnM6IFtdLCBpbnN0YW5jZUluZGV4OiAwLCBob3N0fSk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgIHNvY2tldC5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ29yZGVyU3luY2hyb25pemF0aW9uRmluaXNoZWQnLCBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxuICAgICAgc3luY2hyb25pemF0aW9uSWQ6IGRhdGEucmVxdWVzdElkLCBpbnN0YW5jZUluZGV4OiAwLCBob3N0fSk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgIHNvY2tldC5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ2RlYWxTeW5jaHJvbml6YXRpb25GaW5pc2hlZCcsIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXG4gICAgICBzeW5jaHJvbml6YXRpb25JZDogZGF0YS5yZXF1ZXN0SWQsIGluc3RhbmNlSW5kZXg6IDAsIGhvc3R9KTtcbiAgfVxuXG4gIGFzeW5jIHJlc3BvbmQoc29ja2V0LCBkYXRhKXtcbiAgICBhd2FpdCBzb2NrZXQuZW1pdCgncmVzcG9uc2UnLCB7dHlwZTogJ3Jlc3BvbnNlJywgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgcmVxdWVzdElkOiBkYXRhLnJlcXVlc3RJZH0pO1xuICB9XG5cbiAgYXN5bmMgZW1pdEVycm9yKHNvY2tldCwgZGF0YSwgZXJyb3JJbmRleCwgcmV0cnlBZnRlclNlY29uZHMpIHtcbiAgICBjb25zdCBlcnJvciA9IGVycm9yc1tlcnJvckluZGV4XTtcbiAgICBlcnJvci5tZXRhZGF0YS5yZWNvbW1lbmRlZFJldHJ5VGltZSA9IG5ldyBEYXRlKERhdGUubm93KCkgKyByZXRyeUFmdGVyU2Vjb25kcyAqIDEwMDApO1xuICAgIGVycm9yLnJlcXVlc3RJZCA9IGRhdGEucmVxdWVzdElkO1xuICAgIGF3YWl0IHNvY2tldC5lbWl0KCdwcm9jZXNzaW5nRXJyb3InLCBlcnJvcik7XG4gIH1cblxuICBlbmFibGVTeW5jKHNvY2tldCl7XG4gICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgIHNvY2tldC5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgYXdhaXQgdGhpcy5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgIHRoaXMuc3RhdHVzVGFza3NbZGF0YS5hY2NvdW50SWRdID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICBhd2FpdCB0aGlzLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgIGF3YWl0IHRoaXMuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICB0aGlzLmRlbGV0ZVN0YXR1c1Rhc2soZGF0YS5hY2NvdW50SWQpO1xuICAgICAgICBhd2FpdCB0aGlzLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGRpc2FibGVTeW5jKCl7XG4gICAgc2VydmVyLnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgIHNlcnZlci5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5yZXNwb25kKHNlcnZlciwgZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzdGFydChwb3J0ID0gNjc4NSl7XG4gICAgdGhpcy5pbyA9IG5ldyBTZXJ2ZXIocG9ydCwge3BhdGg6ICcvd3MnLCBwaW5nVGltZW91dDogMTAwMDAwMH0pO1xuICAgIHRoaXMuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgc2VydmVyID0gc29ja2V0O1xuICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywge3R5cGU6ICdyZXNwb25zZSd9KTtcbiAgICAgIHRoaXMuZW5hYmxlU3luYyhzb2NrZXQpO1xuICAgIH0pO1xuICB9XG5cbn1cblxuY29uc3Qgc2VxdWVudGlhbFByb2Nlc3NpbmcgPSBbdHJ1ZSwgZmFsc2VdO1xuc2VxdWVudGlhbFByb2Nlc3NpbmcuZm9yRWFjaChwYXJhbSA9PiB7XG4gIGRlc2NyaWJlKCdTeW5jaHJvbml6YXRpb24gc3RhYmlsaXR5IHRlc3QnLCAoKSA9PiB7XG5cbiAgICBsZXQgZmFrZVNlcnZlcjtcbiAgICBsZXQgY29ubmVjdGlvbjtcbiAgICBsZXQgY2xvY2s7XG4gICAgbGV0IHNhbmRib3g7XG4gICAgbGV0IGFwaTtcblxuICAgIGJlZm9yZSgoKSA9PiB7XG4gICAgICBzYW5kYm94ID0gc2lub24uY3JlYXRlU2FuZGJveCgpO1xuICAgICAgY29uc3QgbW9ja01hdGggPSBPYmplY3QuY3JlYXRlKGdsb2JhbC5NYXRoKTtcbiAgICAgIG1vY2tNYXRoLnJhbmRvbSA9ICgpID0+IDAuMjtcbiAgICAgIGdsb2JhbC5NYXRoID0gbW9ja01hdGg7XG4gICAgfSk7XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNsb2NrID0gc2lub24udXNlRmFrZVRpbWVycyh7c2hvdWxkQWR2YW5jZVRpbWU6IHRydWV9KTtcbiAgICAgIGFwaSA9IG5ldyBNZXRhQXBpKCd0b2tlbicsIHthcHBsaWNhdGlvbjogJ2FwcGxpY2F0aW9uJywgZG9tYWluOiAncHJvamVjdC1zdG9jay5hZ2lsaXVtbGFicy5jbG91ZCcsXG4gICAgICAgIHVzZVNoYXJlZENsaWVudEFwaTogdHJ1ZSwgcmVxdWVzdFRpbWVvdXQ6IDMsIHJldHJ5T3B0czoge1xuICAgICAgICAgIHJldHJpZXM6IDMsIG1pbkRlbGF5SW5TZWNvbmRzOiAwLjEsIG1heERlbGF5SW5TZWNvbmRzOiAwLjUsIHN1YnNjcmliZUNvb2xkb3duSW5TZWNvbmRzOiA2fSwgXG4gICAgICAgIGV2ZW50UHJvY2Vzc2luZzogeyBzZXF1ZW50aWFsUHJvY2Vzc2luZzogcGFyYW0gfX0pO1xuICAgICAgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLl9tZXRhdHJhZGVyQWNjb3VudENsaWVudC5nZXRBY2NvdW50ID0gKGFjY291bnRJZCkgPT4gKHtcbiAgICAgICAgX2lkOiAgYWNjb3VudElkLFxuICAgICAgICBsb2dpbjogJzUwMTk0OTg4JyxcbiAgICAgICAgbmFtZTogJ210NWEnLFxuICAgICAgICBzZXJ2ZXI6ICdJQ01hcmtldHNTQy1EZW1vJyxcbiAgICAgICAgcHJvdmlzaW9uaW5nUHJvZmlsZUlkOiAnZjljZTFmMTItZTcyMC00YjlhLTk0NzctYzJkNGNiMjVmMDc2JyxcbiAgICAgICAgbWFnaWM6IDEyMzQ1NixcbiAgICAgICAgYXBwbGljYXRpb246ICdNZXRhQXBpJyxcbiAgICAgICAgY29ubmVjdGlvblN0YXR1czogJ0RJU0NPTk5FQ1RFRCcsXG4gICAgICAgIHN0YXRlOiAnREVQTE9ZRUQnLFxuICAgICAgICB0eXBlOiAnY2xvdWQnLFxuICAgICAgICBhY2Nlc3NUb2tlbjogJzJSVW5vSDFsZEdibkVuZUNvcVJUZ0k0UU8xWE9tVnpiSDVFVm9Rc0EnXG4gICAgICB9KTtcbiAgICAgIGFwaS5fbWV0YUFwaVdlYnNvY2tldENsaWVudC51cmwgPSAnaHR0cDovL2xvY2FsaG9zdDo2Nzg1JztcbiAgICAgIGZha2VTZXJ2ZXIgPSBuZXcgRmFrZVNlcnZlcigpO1xuICAgICAgYXdhaXQgZmFrZVNlcnZlci5zdGFydCgpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIE9iamVjdC52YWx1ZXMoZmFrZVNlcnZlci5zdGF0dXNUYXNrcykuZm9yRWFjaCh0YXNrID0+IGNsZWFySW50ZXJ2YWwodGFzaykpO1xuICAgICAgY29ubmVjdGlvbi5fd2Vic29ja2V0Q2xpZW50Ll9zdWJzY3JpcHRpb25NYW5hZ2VyLmNhbmNlbEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbi5fd2Vic29ja2V0Q2xpZW50LmNsb3NlKCk7XG4gICAgICBsZXQgcmVzb2x2ZTtcbiAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzID0+IHJlc29sdmUgPSByZXMpO1xuICAgICAgZmFrZVNlcnZlci5pby5jbG9zZSgoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgcHJvbWlzZTtcbiAgICAgIHNhbmRib3gucmVzdG9yZSgpO1xuICAgICAgY2xvY2sucmVzdG9yZSgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzeW5jaHJvbml6ZSBhY2NvdW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBhY2NvdW50LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29ubmVjdGlvbi5nZXRBY2NvdW50SW5mb3JtYXRpb24oKTtcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChyZXNwb25zZSwgYWNjb3VudEluZm9ybWF0aW9uKTtcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHJlY29ubmVjdCBvbiBzZXJ2ZXIgc29ja2V0IGNyYXNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBhY2NvdW50LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgIHNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjb25uZWN0aW9uLmdldEFjY291bnRJbmZvcm1hdGlvbigpO1xuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHJlc3BvbnNlLCBhY2NvdW50SW5mb3JtYXRpb24pO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCBzZXQgc3RhdGUgdG8gZGlzY29ubmVjdGVkIG9uIHRpbWVvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgfSk7XG4gICAgICBzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDYxMDAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgcmVzdWJzY3JpYmUgb24gdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYXdhaXQgYWNjb3VudC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soJ2FjY291bnRJZCcpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDYxMDAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29ubmVjdGlvbi5nZXRBY2NvdW50SW5mb3JtYXRpb24oKTtcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChyZXNwb25zZSwgYWNjb3VudEluZm9ybWF0aW9uKTtcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHN5bmNocm9uaXplIGlmIHN1YnNjcmliZSByZXNwb25zZSBhcnJpdmVzIGFmdGVyIHN5bmNocm9uaXphdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ucmVtb3ZlQWxsTGlzdGVuZXJzKCdjb25uZWN0Jyk7XG4gICAgICBmYWtlU2VydmVyLmlvLm9uKCdjb25uZWN0Jywgc29ja2V0ID0+IHtcbiAgICAgICAgc2VydmVyID0gc29ja2V0O1xuICAgICAgICBzb2NrZXQuZW1pdCgncmVzcG9uc2UnLCB7dHlwZTogJ3Jlc3BvbnNlJ30pO1xuICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgIHNvY2tldC5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICAgIGlmKGRhdGEudHlwZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA0MDApKTsgXG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjb25uZWN0aW9uLmdldEFjY291bnRJbmZvcm1hdGlvbigpO1xuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHJlc3BvbnNlLCBhY2NvdW50SW5mb3JtYXRpb24pO1xuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgd2FpdCB1bnRpbCBhY2NvdW50IGlzIHJlZGVwbG95ZWQgYWZ0ZXIgZGlzY29ubmVjdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYXdhaXQgYWNjb3VudC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soJ2FjY291bnRJZCcpO1xuICAgICAgZmFrZVNlcnZlci5kaXNhYmxlU3luYygpO1xuICAgICAgYXdhaXQgc2VydmVyLmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHt0eXBlOiAnZGlzY29ubmVjdGVkJywgYWNjb3VudElkOiAnYWNjb3VudElkJyxcbiAgICAgICAgaG9zdDogJ3BzLW1wYS0wJywgaW5zdGFuY2VJbmRleDogMH0pO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDAwKTtcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyMDAwMDApO1xuICAgICAgZmFrZVNlcnZlci5lbmFibGVTeW5jKHNlcnZlcik7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDApO1xuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDAwMCk7XG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCByZXN1YnNjcmliZSBpbW1lZGlhdGVseSBhZnRlciBkaXNjb25uZWN0IG9uIHN0YXR1cyBwYWNrZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQnKTtcbiAgICAgIGZha2VTZXJ2ZXIuZGlzYWJsZVN5bmMoKTtcbiAgICAgIGF3YWl0IHNlcnZlci5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ2Rpc2Nvbm5lY3RlZCcsIGFjY291bnRJZDogJ2FjY291bnRJZCcsXG4gICAgICAgIGhvc3Q6ICdwcy1tcGEtMCcsIGluc3RhbmNlSW5kZXg6IDB9KTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyMDAwMCk7XG4gICAgICBjb25uZWN0aW9uLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDAwKTtcbiAgICAgIGZha2VTZXJ2ZXIuZW5hYmxlU3luYyhzZXJ2ZXIpO1xuICAgICAgYXdhaXQgZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNlcnZlciwgJ2FjY291bnRJZCcpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDAwKTtcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHJlY29ubmVjdCBhZnRlciBzZXJ2ZXIgcmVzdGFydHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQnKTtcbiAgICAgICAgZmFrZVNlcnZlci5pby5jbG9zZSgpO1xuICAgICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDAwKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbm5lY3Rpb24uZ2V0QWNjb3VudEluZm9ybWF0aW9uKCk7XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2gocmVzcG9uc2UsIGFjY291bnRJbmZvcm1hdGlvbik7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHN5bmNocm9uaXplIGlmIGNvbm5lY3Rpbmcgd2hpbGUgc2VydmVyIGlzIHJlYm9vdGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGZha2VTZXJ2ZXIuaW8uY2xvc2UoKTtcbiAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3RhcnQoOTAwMCk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGZha2VTZXJ2ZXIuaW8uY2xvc2UoKTtcbiAgICAgICAgZmFrZVNlcnZlci5zdGFydCgpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbm5lY3Rpb24uZ2V0QWNjb3VudEluZm9ybWF0aW9uKCk7XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2gocmVzcG9uc2UsIGFjY291bnRJbmZvcm1hdGlvbik7XG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCByZXN1YnNjcmliZSBvdGhlciBhY2NvdW50cyBhZnRlciBvbmUgb2YgY29ubmVjdGlvbnMgaXMgY2xvc2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBhY2NvdW50LmNvbm5lY3QoKTtcbiAgICAgIGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDEwMDApO1xuICAgICAgY29uc3QgYWNjb3VudDIgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkMicpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjIgPSBhd2FpdCBhY2NvdW50Mi5jb25uZWN0KCk7XG4gICAgICBjb25uZWN0aW9uMi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMTAwMCk7XG4gICAgICBjb25zdCBhY2NvdW50MyA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQzJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMyA9IGF3YWl0IGFjY291bnQzLmNvbm5lY3QoKTtcbiAgICAgIGNvbm5lY3Rpb24zLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygxMDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkMicpO1xuICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQzJyk7XG4gICAgICBmYWtlU2VydmVyLmRpc2FibGVTeW5jKCk7XG4gICAgICBzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDApO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGZha2VTZXJ2ZXIuZW5hYmxlU3luYyhzZXJ2ZXIpO1xuICAgICAgc2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYyg4MDAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBjb25uZWN0aW9uLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY29ubmVjdGlvbjIuc3luY2hyb25pemVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGNvbm5lY3Rpb24yLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGNvbm5lY3Rpb24yLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgY29ubmVjdGlvbjMuc3luY2hyb25pemVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGNvbm5lY3Rpb24zLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGNvbm5lY3Rpb24zLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsaW1pdCBzdWJzY3JpcHRpb25zIGR1cmluZyBwZXIgdXNlciA0MjkgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdWJzY3JpYmVkQWNjb3VudHMgPSB7fTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ucmVtb3ZlQWxsTGlzdGVuZXJzKCdjb25uZWN0Jyk7XG4gICAgICBmYWtlU2VydmVyLmlvLm9uKCdjb25uZWN0Jywgc29ja2V0ID0+IHtcbiAgICAgICAgc2VydmVyID0gc29ja2V0O1xuICAgICAgICBzb2NrZXQuZW1pdCgncmVzcG9uc2UnLCB7dHlwZTogJ3Jlc3BvbnNlJ30pO1xuICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgIHNvY2tldC5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICAgIGlmKGRhdGEudHlwZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzdWJzY3JpYmVkQWNjb3VudHMpLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgc3Vic2NyaWJlZEFjY291bnRzW2RhdGEuYWNjb3VudElkXSA9IHRydWU7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmVtaXRFcnJvcihzb2NrZXQsIGRhdGEsIDEsIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndW5zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBkZWxldGUgc3Vic2NyaWJlZEFjY291bnRzW2RhdGEuYWNjb3VudElkXTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYXdhaXQgYWNjb3VudC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIGNvbnN0IGFjY291bnQyID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDInKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24yID0gYXdhaXQgYWNjb3VudDIuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjIud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgY29uc3QgYWNjb3VudDMgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkMycpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjMgPSBhd2FpdCBhY2NvdW50My5jb25uZWN0KCk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uMy53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGltZW91dEVycm9yIGV4cGVjdGVkJyk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm5hbWUuc2hvdWxkLmVxdWFsKCdUaW1lb3V0RXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLmNsb3NlKCk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMCk7XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2goY29ubmVjdGlvbjMuc3luY2hyb25pemVkLCB0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgd2FpdCBmb3IgcmV0cnkgdGltZSBhZnRlciBwZXIgdXNlciA0MjkgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcmVxdWVzdFRpbWVzdGFtcCA9IDA7XG4gICAgICBjb25zdCBzdWJzY3JpYmVkQWNjb3VudHMgPSB7fTtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3Vic2NyaWJlZEFjY291bnRzKS5sZW5ndGggPCAyIHx8IFxuICAgICAgICAgICAgKHJlcXVlc3RUaW1lc3RhbXAgIT09IDAgJiYgRGF0ZS5ub3coKSAtIDIgKiAxMDAwID4gcmVxdWVzdFRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgICAgc3Vic2NyaWJlZEFjY291bnRzW2RhdGEuYWNjb3VudElkXSA9IHRydWU7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXF1ZXN0VGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5lbWl0RXJyb3Ioc29ja2V0LCBkYXRhLCAxLCAzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgZGVsZXRlIHN1YnNjcmliZWRBY2NvdW50c1tkYXRhLmFjY291bnRJZF07XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBjb25zdCBhY2NvdW50MiA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQyJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMiA9IGF3YWl0IGFjY291bnQyLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIGNvbnN0IGFjY291bnQzID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDMnKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24zID0gYXdhaXQgYWNjb3VudDMuY29ubmVjdCgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbjMud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbWVvdXRFcnJvciBleHBlY3RlZCcpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVyci5uYW1lLnNob3VsZC5lcXVhbCgnVGltZW91dEVycm9yJyk7XG4gICAgICB9XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMCk7XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2goY29ubmVjdGlvbjMuc3luY2hyb25pemVkLCBmYWxzZSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjUwMCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpO1xuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKGNvbm5lY3Rpb24zLnN5bmNocm9uaXplZCwgdHJ1ZSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHdhaXQgZm9yIHJldHJ5IHRpbWUgYWZ0ZXIgcGVyIHNlcnZlciA0MjkgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcmVxdWVzdFRpbWVzdGFtcCA9IDA7XG4gICAgICBjb25zdCBzaWRCeUFjY291bnRzID0ge307XG5cbiAgICAgIGZha2VTZXJ2ZXIuaW8ucmVtb3ZlQWxsTGlzdGVuZXJzKCdjb25uZWN0Jyk7XG4gICAgICBmYWtlU2VydmVyLmlvLm9uKCdjb25uZWN0Jywgc29ja2V0ID0+IHtcbiAgICAgICAgc2VydmVyID0gc29ja2V0O1xuICAgICAgICBzb2NrZXQuZW1pdCgncmVzcG9uc2UnLCB7dHlwZTogJ3Jlc3BvbnNlJ30pO1xuICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgICAgc29ja2V0Lm9uKCdyZXF1ZXN0JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2lkID0gc29ja2V0LmlkO1xuICAgICAgICAgIGlmKGRhdGEudHlwZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgICAgIGlmKE9iamVjdC52YWx1ZXMoc2lkQnlBY2NvdW50cykuZmlsdGVyKGFjY291bnRTSUQgPT4gYWNjb3VudFNJRCA9PT0gc2lkKS5sZW5ndGggPj0gMiAmJiBcbiAgICAgICAgICAocmVxdWVzdFRpbWVzdGFtcCA9PT0gMCB8fCBEYXRlLm5vdygpIC0gNSAqIDEwMDAgPCByZXF1ZXN0VGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICByZXF1ZXN0VGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5lbWl0RXJyb3Ioc29ja2V0LCBkYXRhLCAyLCA1KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNpZEJ5QWNjb3VudHNbZGF0YS5hY2NvdW50SWRdID0gc2lkO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYXdhaXQgYWNjb3VudC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIGNvbnN0IGFjY291bnQyID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDInKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24yID0gYXdhaXQgYWNjb3VudDIuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjIud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgY29uc3QgYWNjb3VudDMgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkMycpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjMgPSBhd2FpdCBhY2NvdW50My5jb25uZWN0KCk7XG4gICAgICBjb25uZWN0aW9uMy53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQuZXF1YWwoc2lkQnlBY2NvdW50cy5hY2NvdW50SWQyKTtcbiAgICAgIHNpZEJ5QWNjb3VudHMuYWNjb3VudElkMi5zaG91bGQubm90LmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkMyk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBjb25zdCBhY2NvdW50NCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQ0Jyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uNCA9IGF3YWl0IGFjY291bnQ0LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb240LndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIHNpZEJ5QWNjb3VudHMuYWNjb3VudElkLnNob3VsZC5lcXVhbChzaWRCeUFjY291bnRzLmFjY291bnRJZDQpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuICBcbiAgICBpdCgnc2hvdWxkIHJlY29ubmVjdCBhZnRlciBwZXIgc2VydmVyIDQyOSBlcnJvciBpZiBjb25uZWN0aW9uIGhhcyBubyBzdWJzY3JpYmVkIGFjY291bnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2lkcyA9IFtdO1xuXG4gICAgICBmYWtlU2VydmVyLmlvLnJlbW92ZUFsbExpc3RlbmVycygnY29ubmVjdCcpO1xuICAgICAgZmFrZVNlcnZlci5pby5vbignY29ubmVjdCcsIHNvY2tldCA9PiB7XG4gICAgICAgIHNlcnZlciA9IHNvY2tldDtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywge3R5cGU6ICdyZXNwb25zZSd9KTtcbiAgICAgICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG4gICAgICAgIHNvY2tldC5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICAgIGNvbnN0IHNpZCA9IHNvY2tldC5pZDtcbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBzaWRzLnB1c2goc2lkKTtcbiAgICAgICAgICAgIGlmIChzaWRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmVtaXRFcnJvcihzb2NrZXQsIGRhdGEsIDIsIDIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAyMDApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgICBmYWtlU2VydmVyLnN0YXR1c1Rhc2tzLmFjY291bnRJZCA9IHNldEludGVydmFsKCgpID0+IGZha2VTZXJ2ZXIuZW1pdFN0YXR1cyhzb2NrZXQsIGRhdGEuYWNjb3VudElkKSwgMTAwKTtcbiAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5hdXRoZW50aWNhdGUoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICBzaWRzWzBdLnNob3VsZC5ub3QuZXF1YWwoc2lkc1sxXSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIGZyZWUgYSBzdWJzY3JpYmUgc2xvdCBvbiB1bnN1YnNjcmliZSBhZnRlciBwZXIgc2VydmVyIDQyOSBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpZEJ5QWNjb3VudHMgPSB7fTtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBjb25zdCBzaWQgPSBzb2NrZXQuaWQ7XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgaWYoT2JqZWN0LnZhbHVlcyhzaWRCeUFjY291bnRzKS5maWx0ZXIoYWNjb3VudFNJRCA9PiBhY2NvdW50U0lEID09PSBzaWQpLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuZW1pdEVycm9yKHNvY2tldCwgZGF0YSwgMiwgMjAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNpZEJ5QWNjb3VudHNbZGF0YS5hY2NvdW50SWRdID0gc2lkO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndW5zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBkZWxldGUgc2lkQnlBY2NvdW50c1tkYXRhLmFjY291bnRJZF07XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBjb25zdCBhY2NvdW50MiA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQyJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMiA9IGF3YWl0IGFjY291bnQyLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIGNvbnN0IGFjY291bnQzID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDMnKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24zID0gYXdhaXQgYWNjb3VudDMuY29ubmVjdCgpO1xuICAgICAgY29ubmVjdGlvbjMud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogNX0pO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgc2lkQnlBY2NvdW50cy5hY2NvdW50SWQuc2hvdWxkLmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkMik7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZDIuc2hvdWxkLm5vdC5lcXVhbChzaWRCeUFjY291bnRzLmFjY291bnRJZDMpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjIuY2xvc2UoKTtcbiAgICAgIGNvbnN0IGFjY291bnQ0ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDQnKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb240ID0gYXdhaXQgYWNjb3VudDQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjQud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgc2lkQnlBY2NvdW50cy5hY2NvdW50SWQuc2hvdWxkLmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkNCk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHdhaXQgZm9yIHJldHJ5IHRpbWUgYWZ0ZXIgcGVyIHNlcnZlciBwZXIgdXNlciA0MjkgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcmVxdWVzdFRpbWVzdGFtcCA9IDA7XG4gICAgICBjb25zdCBzaWRCeUFjY291bnRzID0ge307XG5cbiAgICAgIGZha2VTZXJ2ZXIuaW8ucmVtb3ZlQWxsTGlzdGVuZXJzKCdjb25uZWN0Jyk7XG4gICAgICBmYWtlU2VydmVyLmlvLm9uKCdjb25uZWN0Jywgc29ja2V0ID0+IHtcbiAgICAgICAgc2VydmVyID0gc29ja2V0O1xuICAgICAgICBzb2NrZXQuZW1pdCgncmVzcG9uc2UnLCB7dHlwZTogJ3Jlc3BvbnNlJ30pO1xuICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgICAgc29ja2V0Lm9uKCdyZXF1ZXN0JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2lkID0gc29ja2V0LmlkO1xuICAgICAgICAgIGlmKGRhdGEudHlwZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgICAgIGlmKE9iamVjdC52YWx1ZXMoc2lkQnlBY2NvdW50cykuZmlsdGVyKGFjY291bnRTSUQgPT4gYWNjb3VudFNJRCA9PT0gc2lkKS5sZW5ndGggPj0gMiAmJiBcbiAgICAgICAgICAocmVxdWVzdFRpbWVzdGFtcCA9PT0gMCB8fCBEYXRlLm5vdygpIC0gMiAqIDEwMDAgPCByZXF1ZXN0VGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICByZXF1ZXN0VGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5lbWl0RXJyb3Ioc29ja2V0LCBkYXRhLCAwLCAyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNpZEJ5QWNjb3VudHNbZGF0YS5hY2NvdW50SWRdID0gc2lkO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndW5zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBkZWxldGUgc2lkQnlBY2NvdW50c1tkYXRhLmFjY291bnRJZF07XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBjb25zdCBhY2NvdW50MiA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQyJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMiA9IGF3YWl0IGFjY291bnQyLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIGNvbnN0IGFjY291bnQzID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDMnKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24zID0gYXdhaXQgYWNjb3VudDMuY29ubmVjdCgpO1xuICAgICAgY29ubmVjdGlvbjMud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogNX0pO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgc2lkQnlBY2NvdW50cy5hY2NvdW50SWQuc2hvdWxkLmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkMik7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZDIuc2hvdWxkLm5vdC5lcXVhbChzaWRCeUFjY291bnRzLmFjY291bnRJZDMpO1xuICAgICAgY29uc3QgYWNjb3VudDQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkNCcpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjQgPSBhd2FpdCBhY2NvdW50NC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNC53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQubm90LmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkNCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi5jbG9zZSgpO1xuICAgICAgY29uc3QgYWNjb3VudDUgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkNScpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjUgPSBhd2FpdCBhY2NvdW50NS5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNS53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQuZXF1YWwoc2lkQnlBY2NvdW50cy5hY2NvdW50SWQ1KTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgYXR0ZW1wdCB0byByZXN1YnNjcmliZSBvbiBkaXNjb25uZWN0ZWQgcGFja2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBhY2NvdW50LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pOyBcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soJ2FjY291bnRJZCcpO1xuICAgICAgYXdhaXQgc2VydmVyLmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHt0eXBlOiAnZGlzY29ubmVjdGVkJywgYWNjb3VudElkOiAnYWNjb3VudElkJyxcbiAgICAgICAgaG9zdDogJ3BzLW1wYS0wJywgaW5zdGFuY2VJbmRleDogMH0pO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyMDApO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBzdHJlYW1zIGluIG9uZSBpbnN0YW5jZSBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pOyBcbiAgICAgIGxldCBzdWJzY3JpYmVDYWxsZWQgPSBmYWxzZTtcblxuICAgICAgZmFrZVNlcnZlci5lbmFibGVTeW5jID0gKHNvY2tldCkgPT4ge1xuICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgICAgc29ja2V0Lm9uKCdyZXF1ZXN0JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgc3Vic2NyaWJlQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSwgJ3BzLW1wYS0xJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGZha2VTZXJ2ZXIuZW5hYmxlU3luYyhzZXJ2ZXIpO1xuICAgICAgY29uc3Qgc3RhdHVzVGFzayA9IHNldEludGVydmFsKCgpID0+IGZha2VTZXJ2ZXIuZW1pdFN0YXR1cyhzZXJ2ZXIsICdhY2NvdW50SWQnLCAncHMtbXBhLTEnKSwgMTAwKTtcbiAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNlcnZlciwge2FjY291bnRJZDogJ2FjY291bnRJZCd9LCAncHMtbXBhLTEnKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDApOyBcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkJyk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTAnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDEwMDAwKTsgXG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgc3Vic2NyaWJlQ2FsbGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTEnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBjbGVhckludGVydmFsKHN0YXR1c1Rhc2spO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgbm90IHJlc3Vic2NyaWJlIGlmIG11bHRpcGxlIHN0cmVhbXMgYW5kIG9uZSB0aW1lZCBvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGFjY291bnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pOyBcbiAgICAgIGxldCBzdWJzY3JpYmVDYWxsZWQgPSBmYWxzZTtcblxuICAgICAgZmFrZVNlcnZlci5lbmFibGVTeW5jID0gKHNvY2tldCkgPT4ge1xuICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgICAgc29ja2V0Lm9uKCdyZXF1ZXN0JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgc3Vic2NyaWJlQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSwgJ3BzLW1wYS0xJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGZha2VTZXJ2ZXIuZW5hYmxlU3luYyhzZXJ2ZXIpO1xuICAgICAgY29uc3Qgc3RhdHVzVGFzayA9IHNldEludGVydmFsKCgpID0+IGZha2VTZXJ2ZXIuZW1pdFN0YXR1cyhzZXJ2ZXIsICdhY2NvdW50SWQnLCAncHMtbXBhLTEnKSwgMTIwKTtcbiAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNlcnZlciwge2FjY291bnRJZDogJ2FjY291bnRJZCd9LCAncHMtbXBhLTEnKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDApOyBcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkJyk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNTUwMDApOyBcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgc3Vic2NyaWJlQ2FsbGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjbGVhckludGVydmFsKHN0YXR1c1Rhc2spO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYyg2NTAwMCk7IFxuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgc3Vic2NyaWJlQ2FsbGVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgbm90IHN5bmNocm9uaXplIGlmIGNvbm5lY3Rpb24gaXMgY2xvc2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHN5bmNocm9uaXplQ291bnRlciA9IDA7XG4gICAgICBmYWtlU2VydmVyLmlvLnJlbW92ZUFsbExpc3RlbmVycygnY29ubmVjdCcpO1xuICAgICAgZmFrZVNlcnZlci5pby5vbignY29ubmVjdCcsIHNvY2tldCA9PiB7XG4gICAgICAgIHNlcnZlciA9IHNvY2tldDtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywge3R5cGU6ICdyZXNwb25zZSd9KTtcbiAgICAgICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG4gICAgICAgIHNvY2tldC5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICAgIGlmKGRhdGEudHlwZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBmYWtlU2VydmVyLnN0YXR1c1Rhc2tzLmFjY291bnRJZCA9IHNldEludGVydmFsKCgpID0+IGZha2VTZXJ2ZXIuZW1pdFN0YXR1cyhzb2NrZXQsIGRhdGEuYWNjb3VudElkKSwgMTAwKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgICAgIHN5bmNocm9uaXplQ291bnRlcisrO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSwgJ3BzLW1wYS0xJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKGRhdGEuYWNjb3VudElkKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYXdhaXQgYWNjb3VudC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7IFxuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHN5bmNocm9uaXplQ291bnRlciwgMSk7XG4gICAgICBjb25zdCBhY2NvdW50MiA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQyJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMiA9IGF3YWl0IGFjY291bnQyLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi5jbG9zZSgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbjIud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pOyBcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaW1lb3V0RXJyb3IgZXh0ZWN0ZWQnKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubmFtZS5zaG91bGQuZXF1YWwoJ1RpbWVvdXRFcnJvcicpO1xuICAgICAgfVxuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHN5bmNocm9uaXplQ291bnRlciwgMSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZXN1YnNjcmliZSBhZnRlciBjb25uZWN0aW9uIGlzIGNsb3NlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBzdWJzY3JpYmVDb3VudGVyID0gMDtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVDb3VudGVyKys7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDEwMCkpOyBcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKGRhdGEuYWNjb3VudElkKTtcbiAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5hdXRoZW50aWNhdGUoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKGRhdGEuYWNjb3VudElkKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBhY2NvdW50LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTsgXG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgc3Vic2NyaWJlQ291bnRlci5zaG91bGQuZXF1YWwoMSk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTAnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDMwMCkpOyBcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygxMDAwMDApOyBcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgc3Vic2NyaWJlQ291bnRlci5zaG91bGQuYmUuYWJvdmUoMSk7XG4gICAgICBjb25zdCBwcmV2aW91c1N1YnNjcmliZUNvdW50ZXIgPSBzdWJzY3JpYmVDb3VudGVyO1xuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIHNlcnZlci5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ2Rpc2Nvbm5lY3RlZCcsIGFjY291bnRJZDogJ2FjY291bnRJZCcsXG4gICAgICAgIGhvc3Q6ICdwcy1tcGEtMCcsIGluc3RhbmNlSW5kZXg6IDB9KTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMTAwMCkpOyBcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygxMDAwMDApOyBcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMTAwMCkpOyBcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChzdWJzY3JpYmVDb3VudGVyLCBwcmV2aW91c1N1YnNjcmliZUNvdW50ZXIpO1xuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmVzdWJzY3JpYmUgb24gdGltZW91dCBpZiBjb25uZWN0aW9uIGlzIGNsb3NlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYXdhaXQgYWNjb3VudC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7IFxuICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMTAwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDYyMDAwKTsgXG4gICAgICBjb25uZWN0aW9uLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBtdWx0aXBsZSBzdWJzY3JpYmUgcmVxdWVzdHMgaWYgc3RhdHVzIGFycml2ZXMgZmFzdGVyIHRoYW4gc3Vic2NyaWJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHN1YnNjcmliZUNvdW50ZXIgPSAwO1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBhY2NvdW50LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTsgXG4gICAgICBmYWtlU2VydmVyLmRpc2FibGVTeW5jKCk7XG4gICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soJ2FjY291bnRJZCcpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAxMDApKTsgXG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMTIwMDAwKTsgXG4gICAgICBjb25uZWN0aW9uLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyLnNob3VsZC5lcXVhbChmYWxzZSk7XG5cbiAgICAgIHNlcnZlci5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgIHNlcnZlci5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgc3Vic2NyaWJlQ291bnRlcisrO1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjgwMCkpOyBcbiAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc2VydmVyLCBkYXRhKTtcbiAgICAgICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soZGF0YS5hY2NvdW50SWQpO1xuICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNlcnZlciwgZGF0YS5hY2NvdW50SWQpLCAxMDAwKTtcbiAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzZXJ2ZXIsIGRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzZXJ2ZXIsIGRhdGEpO1xuICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc2VydmVyLCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJykge1xuICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzZXJ2ZXIsIGRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc2VydmVyLCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd1bnN1YnNjcmliZScpIHtcbiAgICAgICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soZGF0YS5hY2NvdW50SWQpO1xuICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzZXJ2ZXIsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNlcnZlciwgJ2FjY291bnRJZCcpLCAxMDAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMTAwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDAwMCk7IFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAxMDApKTsgXG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHN1YnNjcmliZUNvdW50ZXIsIDEpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuICB9KTtcbn0pO1xuIl19